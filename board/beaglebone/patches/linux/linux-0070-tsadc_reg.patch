--- a/drivers/iio/adc/ti_am335x_adc.c	2014-10-09 08:46:37.000000000 -0500
+++ b/drivers/iio/adc/ti_am335x_adc.c	2015-01-21 12:15:40.248070858 -0600
@@ -158,7 +158,7 @@
 		int *val, int *val2, long mask)
 {
 	struct tiadc_device *adc_dev = iio_priv(indio_dev);
-	int i, map_val;
+	int i;
 	unsigned int fifo1count, read, stepid;
 	u32 step = UINT_MAX;
 	bool found = false;
@@ -179,7 +179,6 @@
 			return -EAGAIN;
 		}
 	}
-	map_val = chan->channel + TOTAL_CHANNELS;

 	/*
 	 * When the sub-system is first enabled,
@@ -209,7 +208,7 @@
 		stepid = read & FIFOREAD_CHNLID_MASK;
 		stepid = stepid >> 0x10;

-		if (stepid == map_val) {
+		if (stepid == step) {
 			read = read & FIFOREAD_DATA_MASK;
 			found = true;
 			*val = read;
